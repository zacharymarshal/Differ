// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    $(document).on('click', '.comment-cancel', function() {
      $(this).parent('td').parent('tr#line-comment_template').prev('tr.line-comments').show();
      return $(this).parents('tr').remove();
    });
    if (!$("input[name=\"username\"]").val()) {
      $("#myModal").modal('show');
    }
    $(document).on('click', '#set-email', function() {
      return $('input[name="username"]').val($('#commenter').val());
    });
    $('.line').click(function(e) {
      var comment, comment_textarea, info, name;
      info = $(e.target).parents('tr').data();
      comment = $('#line-comment_template').clone();
      comment_textarea = comment.find('textarea');
      name = "comments[" + info.file + "][" + info.line_number + "][comment]";
      comment_textarea.attr('name', name).text('');
      comment.find('.btn-submit-comment').val('Add Comment');
      return comment.insertAfter($(e.target).parent('tr')).show();
    });
    return $('.edit-comment').click(function(e) {
      var comment, comment_id, comment_line, comment_textarea, info;
      info = $(this).data();
      comment = $('#line-comment_template').clone();
      comment_textarea = comment.find('textarea');
      comment_id = comment.find('.comment-id-input');
      comment.find('.btn-submit-comment').val('Save');
      comment_textarea.attr('name', "comments[" + info.file + "][" + info.line_number + "][comment]");
      comment_textarea.text($.trim(info.comment_text));
      comment_id.attr('name', "comments[" + info.file + "][" + info.line_number + "][id]");
      comment_id.val(info.comment_id);
      comment_line = $(this).parent('td').parent('tr.line-comments');
      comment.insertAfter(comment_line).show();
      return comment_line.hide();
    });
  });

}).call(this);
